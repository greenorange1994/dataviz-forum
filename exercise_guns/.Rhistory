# Draw a picture showing the relationship between gun ownership and firearm deaths
ggplot(df, aes(x = Gun_ownership, y = Deaths_per_100000)) + geom_point(color = "pink") + geom_text(aes(label = State))
ggplot(df, aes(x = Gun_ownership, y = Deaths_per_100000)) + geom_point(color = "pink") + geom_text(aes(label = State))
# Create a new data frame consisting of gun ownership and firearm deaths by state and in the aggregate
names(gun_deaths) <- c("State", "Deaths_per_100000")
df <- data.frame(cbind(gun_ownership[1:52, ]$State, gun_deaths[1:52, ]$Deaths_per_100000, gun_ownership[1:52, ]$Yes))
names(df) <-  c("State", "Deaths_per_100000", "Gun_ownership")
levels(df$State) <- c(levels(df$State), "U.S.")
df$State[df$State == "All Participants"] <- "U.S."
# Draw a picture showing the relationship between gun ownership and firearm deaths
ggplot(df, aes(x = Gun_ownership, y = Deaths_per_100000)) + geom_point(color = "pink") + geom_text(aes(label = State))
arrange(df, gun_ownership)
arrange(df, Deaths_per_100000)
9.7 < 10.3
arrange(df, gun_ownership)
df[order(Gun_ownership), ]
df[order(df$Gun_ownership), ]
# Create a new data frame consisting of gun ownership and firearm deaths by state and in the aggregate
names(gun_deaths) <- c("State", "Deaths_per_100000")
df <- data.frame(cbind(gun_ownership[1:52, ]$State, as.numeric(gun_deaths[1:52, ]$Deaths_per_100000),
as.numeric(gun_ownership[1:52, ]$Yes)))
names(df) <-  c("State", "Deaths_per_100000", "Gun_ownership")
levels(df$State) <- c(levels(df$State), "U.S.")
df$State[df$State == "All Participants"] <- "U.S."
# Draw a picture showing the relationship between gun ownership and firearm deaths
ggplot(df, aes(x = Gun_ownership, y = Deaths_per_100000)) + geom_point(color = "pink") + geom_text(aes(label = State))
names(gun_deaths) <- c("State", "Deaths_per_100000")
df <- data.frame(cbind(gun_ownership[1:52, ]$State, as.numeric(gun_deaths[1:52, ]$Deaths_per_100000),
as.numeric(gun_ownership[1:52, ]$Yes)))
names(df) <-  c("State", "Deaths_per_100000", "Gun_ownership")
levels(df$State) <- c(levels(df$State), "U.S.")
df$State[df$State == "All Participants"] <- "U.S."
df[order(df$Gun_ownership, )]
View(df)
df[order(df$Gun_ownership,), ]
df[order(df$Gun_ownership), ]
class(df$Gun_ownership)
class(df$Gun_ownership[1])
class(as.numeric(df$Gun_ownership[1]))
df <- data.frame(cbind(gun_ownership[1:52, ]$State, as.numeric(gun_deaths[1:52, ]$Deaths_per_100000),
as.numeric(gun_ownership[1:52, ]$Yes)))
class(df$Gun_ownership[1])
View(df)
class(df$Gun_ownership[1])
class(df$Gun_ownership)
# Create a new data frame consisting of gun ownership and firearm deaths by state and in the aggregate
names(gun_deaths) <- c("State", "Deaths_per_100000")
gun_deaths$Deaths_per_100000 <- as.numeric(gun_deaths$Deaths_per_100000)
gun_ownership$Yes <- as.numeric(gun_ownership$Yes)
df <- data.frame(cbind(gun_ownership[1:52, ]$State, gun_deaths[1:52, ]$Deaths_per_100000, gun_ownership[1:52, ]$Yes))
names(df) <-  c("State", "Deaths_per_100000", "Gun_ownership")
levels(df$State) <- c(levels(df$State), "U.S.")
df$State[df$State == "All Participants"] <- "U.S."
# Draw a picture showing the relationship between gun ownership and firearm deaths
ggplot(df, aes(x = Gun_ownership, y = Deaths_per_100000)) + geom_point(color = "pink") + geom_text(aes(label = State))
class(df$Gun_ownership[1])
class(gun_deaths$Deaths_per_100000)
names(gun_deaths) <- c("State", "Deaths_per_100000")
gun_deaths$Deaths_per_100000 <- as.numeric(gun_deaths$Deaths_per_100000)
gun_ownership$Yes <- as.numeric(gun_ownership$Yes)
gun_ownership$State <- as.character(gun_ownership$State)
df <- data.frame(cbind(gun_ownership[1:52, ]$State, gun_deaths[1:52, ]$Deaths_per_100000, gun_ownership[1:52, ]$Yes))
class(gun_deaths$Deaths_per_100000)
class(df$Deaths_per_100000)
class(df$State)
class(gun_ownership$State)
class(gun_ownership$State[1])
class(gun_ownership[1:52, ]$State)
class(df$State)
df <- cbind(gun_ownership[1:52, ]$State, gun_deaths[1:52, ]$Deaths_per_100000, gun_ownership[1:52, ]$Yes)
class(df$State)
class(df[1])
df <- as.data.frame(df)
class(df[1])
class(df$State)
names(gun_deaths) <- c("State", "Deaths_per_100000")
gun_deaths$Deaths_per_100000 <- as.numeric(gun_deaths$Deaths_per_100000)
gun_ownership$Yes <- as.numeric(gun_ownership$Yes)
gun_ownership$State <- as.character(gun_ownership$State)
df <- cbind(gun_ownership[1:52, ]$State, gun_deaths[1:52, ]$Deaths_per_100000, gun_ownership[1:52, ]$Yes)
names(df) <-  c("State", "Deaths_per_100000", "Gun_ownership")
df$State
df[1, 1] = "U.S."
View(df)
# Create a new data frame consisting of gun ownership and firearm deaths by state and in the aggregate
names(gun_deaths) <- c("State", "Deaths_per_100000")
gun_deaths$Deaths_per_100000 <- as.numeric(gun_deaths$Deaths_per_100000)
gun_ownership$Yes <- as.numeric(gun_ownership$Yes)
gun_ownership$State <- as.character(gun_ownership$State)
df <- cbind(gun_ownership[1:52, ]$State, gun_deaths[1:52, ]$Deaths_per_100000, gun_ownership[1:52, ]$Yes)
names(df) <-  c("State", "Deaths_per_100000", "Gun_ownership")
df[1, 1] = "U.S."
#levels(df$State) <- c(levels(df$State), "U.S.")
#df$State[df$State == "All Participants"] <- "U.S."
# Draw a picture showing the relationship between gun ownership and firearm deaths
ggplot(df, aes(x = Gun_ownership, y = Deaths_per_100000)) + geom_point(color = "pink") + geom_text(aes(label = State))
# Create a new data frame consisting of gun ownership and firearm deaths by state and in the aggregate
names(gun_deaths) <- c("State", "Deaths_per_100000")
gun_deaths$Deaths_per_100000 <- as.numeric(gun_deaths$Deaths_per_100000)
gun_ownership$Yes <- as.numeric(gun_ownership$Yes)
gun_ownership$State <- as.character(gun_ownership$State)
df <- cbind(gun_ownership[1:52, ]$State, gun_deaths[1:52, ]$Deaths_per_100000, gun_ownership[1:52, ]$Yes)
names(df) <-  c("State", "Deaths_per_100000", "Gun_ownership")
df[1, 1] = "U.S."
#levels(df$State) <- c(levels(df$State), "U.S.")
#df$State[df$State == "All Participants"] <- "U.S."
# Draw a picture showing the relationship between gun ownership and firearm deaths
ggplot(df, aes(x = df[, 3], y = df[, 2])) + geom_point(color = "pink") + geom_text(aes(label = df[, 1]))
# Create a new data frame consisting of gun ownership and firearm deaths by state and in the aggregate
names(gun_deaths) <- c("State", "Deaths_per_100000")
df <- data.frame(cbind(gun_ownership[1:52, ]$State, gun_deaths[1:52, ]$Deaths_per_100000, gun_ownership[1:52, ]$Yes))
names(df) <-  c("State", "Deaths_per_100000", "Gun_ownership")
levels(df$State) <- c(levels(df$State), "U.S.")
df$State[df$State == "All Participants"] <- "U.S."
# Draw a picture showing the relationship between gun ownership and firearm deaths
ggplot(df, aes(x = df[, 3], y = df[, 2])) + geom_point(color = "pink") + geom_text(aes(label = df[, 1]))
# Create a new data frame consisting of gun ownership and firearm deaths by state and in the aggregate
names(gun_deaths) <- c("State", "Deaths_per_100000")
df <- data.frame(cbind(gun_ownership[1:52, ]$State, gun_deaths[1:52, ]$Deaths_per_100000, gun_ownership[1:52, ]$Yes))
names(df) <-  c("State", "Deaths_per_100000", "Gun_ownership")
levels(df$State) <- c(levels(df$State), "U.S.")
df$State[df$State == "All Participants"] <- "U.S."
df$Deaths_per_100000 <- as.numeric(df$Deaths_per_100000)
df$Gun_ownership <- as.numeric(df$Gun_ownership)
df$State <- as.character(df$State)
# Draw a picture showing the relationship between gun ownership and firearm deaths
ggplot(df, aes(x = df[, 3], y = df[, 2])) + geom_point(color = "pink") + geom_text(aes(label = df[, 1]))
# Create a new data frame consisting of gun ownership and firearm deaths by state and in the aggregate
names(gun_deaths) <- c("State", "Deaths_per_100000")
df <- data.frame(cbind(gun_ownership[1:52, ]$State, gun_deaths[1:52, ]$Deaths_per_100000, gun_ownership[1:52, ]$Yes))
names(df) <-  c("State", "Deaths_per_100000", "Gun_ownership")
levels(df$State) <- c(levels(df$State), "U.S.")
df$State[df$State == "All Participants"] <- "U.S."
df$Deaths_per_100000 <- as.numeric(df$Deaths_per_100000)
df$Gun_ownership <- as.numeric(df$Gun_ownership)
df$State <- as.character(df$State)
# Draw a picture showing the relationship between gun ownership and firearm deaths
ggplot(df, aes(x = Gun_ownership, y = Deaths_per_100000)) + geom_point(color = "pink") + geom_text(aes(label = State))
# Create a new data frame consisting of gun ownership and firearm deaths by state and in the aggregate
names(gun_deaths) <- c("State", "Deaths_per_100000")
df <- data.frame(cbind(gun_ownership[1:52, ]$State, gun_deaths[1:52, ]$Deaths_per_100000, gun_ownership[1:52, ]$Yes))
names(df) <-  c("State", "Deaths_per_100000", "Gun_ownership")
levels(df$State) <- c(levels(df$State), "U.S.")
df$State[df$State == "All Participants"] <- "U.S."
# Change data structures for order
df$Deaths_per_100000 <- as.numeric(df$Deaths_per_100000)
df$Gun_ownership <- as.numeric(df$Gun_ownership)
df$State <- as.character(df$State)
# Draw a picture showing the relationship between gun ownership and firearm deaths
ggplot(df, aes(x = Gun_ownership, y = Deaths_per_100000)) + geom_point(color = "pink") + geom_text(aes(label = State))
unique(gun_inddeaths$year)
?count
count(gun_inddeaths, vars = year)
gun_inddeaths_year <- group_by(gun_inddeaths, year, intent) %>%
summarise(num_death = count(year), na.rm = TRUE)
gun_inddeaths_year <- group_by(gun_inddeaths, year, intent)
View(gun_inddeaths)
View(gun_inddeaths_year)
gun_inddeaths_year <- group_by(gun_inddeaths, year, intent) %>%
summarise(num_death = sum(c(year, intent)))
gun_inddeaths_year <- group_by(gun_inddeaths, year, intent) %>%
summarise(num_death = sum(count(year, intent)))
gun_inddeaths_year <- group_by(gun_inddeaths, year, intent) %>%
summarise(num_death = sum(count(vars = year, intent)))
gun_inddeaths$c <- 1
gun_inddeaths_year <- group_by(gun_inddeaths, year, intent) %>%
summarise(num_death = sum(count(vars = c)))
gun_inddeaths$c <- 1
gun_inddeaths_year <- group_by(gun_inddeaths, year, intent) %>%
summarise(num_death = sum(count(vars = c)), na.rm = TRUE)
gun_inddeaths$c <- 1
total_inddeaths <- count(gun_inddeaths, c("year", "intent"))
count(gun_inddeaths, c("year", "intent"))
View(gun_inddeaths_year)
View(gun_inddeaths)
count(gun_inddeaths, c("year"))
knitr::opts_chunk$set(echo = TRUE)
library(ggplot2)
library(gunsales)
gun_sales <- analysis()
library(XML)
library(dplyr)
gun_ownership_url = 'http://www.washingtonpost.com/wp-srv/health/interactives/guns/ownership.html'
gun_ownership = readHTMLTable(gun_ownership_url, header = TRUE, which = 1)
gun_ownership = gun_ownership[-1, ]
parse_num = function (x) as.numeric(sub(',', '', x))
gun_ownership = select(gun_ownership, State = 1, Total = 2, Yes = 3,
`Yes %` = 4, No = 5, `No %` = 6) %>%
mutate_each(funs(parse_num), -State)
gun_ownership = gun_ownership %>%
mutate(`Child access prevention` = grepl('\\*$', State),
State  = sub('\\*$', '', State))
# Fix D.C. name
gun_ownership[gun_ownership$State == 'The District', 'State'] = 'District of Columbia'
gun_deaths = read.csv(file.choose(), skip = 3) %>%
select(State = 1, `Deaths per 100000` = 2)
library(readr)
gun_inddeaths <- read_csv("https://raw.githubusercontent.com/fivethirtyeight/guns-data/master/full_data.csv")
gun_inddeaths <- gun_inddeaths[,2:dim(gun_inddeaths)[2]]
# Create a new data frame consisting of gun ownership and firearm deaths by state and in the aggregate
names(gun_deaths) <- c("State", "Deaths_per_100000")
df <- data.frame(cbind(gun_ownership[1:52, ]$State, gun_deaths[1:52, ]$Deaths_per_100000, gun_ownership[1:52, ]$Yes))
names(df) <-  c("State", "Deaths_per_100000", "Gun_ownership")
levels(df$State) <- c(levels(df$State), "U.S.")
df$State[df$State == "All Participants"] <- "U.S."
# Change factor into other data structures to order
df$Deaths_per_100000 <- as.numeric(df$Deaths_per_100000)
df$Gun_ownership <- as.numeric(df$Gun_ownership)
df$State <- as.character(df$State)
# Draw a picture showing the relationship between gun ownership and firearm deaths
ggplot(df, aes(x = Gun_ownership, y = Deaths_per_100000)) + geom_point(color = "pink") + geom_text(aes(label = State))
# Calculate total gun sales in a year and delete data from 2016 because there is only 2-month data.
gun_sales_year <- gun_sales[1:192, ]%>%
group_by(year) %>%
summarise(sales_year = sum(guns_total), na.rm = TRUE)
ggplot(gun_sales_year, aes(x = year, y = sales_year)) + geom_point(color = "blue", size = 3) + geom_smooth(color = "black", lwd = 1.5, se = FALSE)
total_inddeaths <- count(gun_inddeaths, c("year", "intent"))
total_inddeaths <- count(gun_inddeaths, year)
View(total_inddeaths)
total_inddeaths <- count(gun_inddeaths, year)
total_inddeaths <- count(gun_inddeaths, intent)
View(total_inddeaths)
count(gun_inddeaths, c("year", "intent"), na.rm = TRUE)
count(gun_inddeaths, year, intent)
total_inddeaths <- count(gun_inddeaths, year, intent, na.rm = TRUE)
View(total_inddeaths)
View(total_inddeaths)
total_inddeaths <- count(gun_inddeaths, year, intent, na.rm = TRUE)
ggplot(total_inddeaths, aes(x = year, y = n)) + geom_point(color = intent)
total_inddeaths <- count(gun_inddeaths, year, intent)
total_inddeaths <- subset(total_inddeaths, na.rm = TRUE)
ggplot(total_inddeaths, aes(x = year, y = n)) + geom_point(color = intent)
total_inddeaths <- count(gun_inddeaths, year, intent)
total_inddeaths <- na.omit(total_inddeaths)
ggplot(total_inddeaths, aes(x = year, y = n)) + geom_point(color = intent)
View(total_inddeaths)
total_inddeaths <- count(gun_inddeaths, year, intent)
total_inddeaths <- na.omit(total_inddeaths)
ggplot(total_inddeaths, aes(x = year, y = n)) + geom_point()
total_inddeaths <- count(gun_inddeaths, year, intent)
total_inddeaths <- na.omit(total_inddeaths)
ggplot(total_inddeaths, aes(x = year, y = n)) + geom_point(aes(color = intent))
total_inddeaths <- count(gun_inddeaths, year, intent)
total_inddeaths <- na.omit(total_inddeaths)
ggplot(total_inddeaths, aes(x = year, y = n)) + geom_point(aes(color = intent)) + geom_smooth(lwd = 2, se = FALSE, aes(color = intent))
total_inddeaths <- count(gun_inddeaths, year, intent)
total_inddeaths <- na.omit(total_inddeaths)
ggplot(total_inddeaths, aes(x = year, y = n)) + geom_point(aes(color = intent)) + geom_smooth(lwd = 1, se = FALSE, aes(color = intent, method = 'lm'))
View(gun_inddeaths)
total_inddeaths <- count(gun_inddeaths, year, month, intent)
total_inddeaths <- na.omit(total_inddeaths)
ggplot(total_inddeaths, aes(x = month, y = n)) + geom_point(aes(color = intent)) + geom_smooth(lwd = 1, se = FALSE, aes(color = intent, method = 'lm'))
View(total_inddeaths)
total_inddeaths <- count(gun_inddeaths, year, month, intent)
total_inddeaths <- na.omit(total_inddeaths)
ggplot(total_inddeaths, aes(x = month, year, y = n)) + geom_point(aes(color = intent)) + geom_smooth(lwd = 1, se = FALSE, aes(color = intent, method = 'lm'))
total_inddeaths <- count(gun_inddeaths, year, month, intent)
total_inddeaths <- na.omit(total_inddeaths)
ggplot(total_inddeaths, aes(x = (month, year), y = n)) + geom_point(aes(color = intent)) + geom_smooth(lwd = 1, se = FALSE, aes(color = intent, method = 'lm'))
View(total_inddeaths)
total_inddeaths <- count(gun_inddeaths, year, month, intent)
total_inddeaths <- na.omit(total_inddeaths)
ggplot(total_inddeaths, aes(x = year, y = n)) + geom_point(aes(color = intent)) + geom_smooth(lwd = 1, se = FALSE, aes(color = intent), method = 'lm')
# total deaths by time
total <- count(gun_inddeaths, year, month)
ggplot(total_inddeaths, aes(x = year, y = n)) + geom_point() + geom_smooth(lwd = 1, se = FALSE, method = 'lm')
# total deaths by time and intent
total_inddeaths <- count(gun_inddeaths, year, month, intent)
total_inddeaths <- na.omit(total_inddeaths)
ggplot(total_inddeaths, aes(x = year, y = n)) + geom_point(aes(color = intent)) + geom_smooth(lwd = 1, se = FALSE, aes(color = intent), method = 'lm')
# total deaths by time
total <- count(gun_inddeaths, year, month)
total$time <- total$year + total$month
View(total)
# total deaths by time
gun_inddeaths$date <- as.Date( paste( gun_inddeaths$month , gun_inddeaths$year , sep = "." )  , format = "%m.%d" )
total <- count(gun_inddeaths, date, month)
ggplot(total_inddeaths, aes(x = date, y = n)) + geom_point() + geom_smooth(lwd = 1, se = FALSE, method = 'lm')
View(total)
# total deaths by time
gun_inddeaths$date <- as.Date( paste( gun_inddeaths$month , gun_inddeaths$year , sep = "." )  , format = "%m.%d" )
total <- count(gun_inddeaths, date)
ggplot(total, aes(x = date, y = n)) + geom_point() + geom_smooth(lwd = 1, se = FALSE, method = 'lm')
# total deaths by time and intent
total_inddeaths <- count(gun_inddeaths, date, intent)
total_inddeaths <- na.omit(total_inddeaths)
ggplot(total_inddeaths, aes(x = date, y = n)) + geom_point(aes(color = intent)) + geom_smooth(lwd = 1, se = FALSE, aes(color = intent), method = 'lm')
View(total)
paste( gun_inddeaths$month , gun_inddeaths$year , sep = "." )
View(gun_inddeaths)
gun_inddeaths$date <- as.Date(paste(gun_inddeaths$month , gun_inddeaths$year , sep = ".")  , format = "%m.%d")
View(gun_inddeaths)
a = 01-2016
as.Date(a)
a = 01.2016
as.Date(a)
?as.Date
class(gun_inddeaths$year)
class(gun_inddeaths$month)
class(paste(gun_inddeaths$month , gun_inddeaths$year , sep = ".") )
as.Date(class(paste(gun_inddeaths$month , gun_inddeaths$year , sep = ".") ))
as.Date(paste(gun_inddeaths$month , gun_inddeaths$year , sep = ".")  , format = "%m.%d")
# total deaths by time
gun_inddeaths$date <- paste(gun_inddeaths$month , gun_inddeaths$year , sep = ".")
total <- count(gun_inddeaths, date)
ggplot(total, aes(x = date, y = n)) + geom_point() + geom_smooth(lwd = 1, se = FALSE, method = 'lm')
# total deaths by time and intent
total_inddeaths <- count(gun_inddeaths, date, intent)
total_inddeaths <- na.omit(total_inddeaths)
ggplot(total_inddeaths, aes(x = date, y = n)) + geom_point(aes(color = intent)) + geom_smooth(lwd = 1, se = FALSE, aes(color = intent), method = 'lm')
View(total)
# total deaths by time
gun_inddeaths$date <- paste(gun_inddeaths$year, gun_inddeaths$month,  sep = ".")
total <- count(gun_inddeaths, date)
ggplot(total, aes(x = date, y = n)) + geom_point() + geom_smooth(lwd = 1, se = FALSE, method = 'lm')
# total deaths by time and intent
total_inddeaths <- count(gun_inddeaths, date, intent)
total_inddeaths <- na.omit(total_inddeaths)
ggplot(total_inddeaths, aes(x = date, y = n)) + geom_point(aes(color = intent)) + geom_smooth(lwd = 1, se = FALSE, aes(color = intent), method = 'lm')
gun_inddeaths$date <- paste(gun_inddeaths$year, gun_inddeaths$month,  sep = ".")
total <- count(gun_inddeaths, date)
ggplot(total, aes(x = date, y = n)) + geom_point() + geom_smooth(lwd = 1, se = FALSE, method = 'lm')
# total deaths by time
gun_inddeaths$date <- as.POSIXct(paste(gun_inddeaths$year, gun_inddeaths$month,  sep = "."))
# total deaths by time
gun_inddeaths$date <- as.POSIXct(paste(gun_inddeaths$month, gun_inddeaths$year,  sep = "."), format = "%m.%y")
total <- count(gun_inddeaths, date)
ggplot(total, aes(x = date, y = n)) + geom_point() + geom_smooth(lwd = 1, se = FALSE)
# total deaths by time
gun_inddeaths$date <- as.POSIXct(paste(gun_inddeaths$month, gun_inddeaths$year,  sep = "."), format = "%m.%d")
total <- count(gun_inddeaths, date)
ggplot(total, aes(x = date, y = n)) + geom_point() + geom_smooth(lwd = 1, se = FALSE)
# total deaths by time and intent
total_inddeaths <- count(gun_inddeaths, date, intent)
total_inddeaths <- na.omit(total_inddeaths)
ggplot(total_inddeaths, aes(x = date, y = n)) + geom_point(aes(color = intent)) + geom_smooth(lwd = 1, se = FALSE, aes(color = intent), method = 'lm')
# total deaths by time
gun_inddeaths$date <- as.POSIXit(paste(gun_inddeaths$month, gun_inddeaths$year,  sep = "."), format = "%m.%d")
?as.Date.POSIXlt
# total deaths by time
gun_inddeaths$date <- as.POSIXlt(paste(gun_inddeaths$month, gun_inddeaths$year,  sep = "."), format = "%m.%d")
total <- count(gun_inddeaths, date)
View(gun_deaths)
View(gun_inddeaths)
# total deaths by time
gun_inddeaths$date <- as.POSIXct(paste(gun_inddeaths$month, gun_inddeaths$year,  sep = "."), format = "%m.%d")
total <- count(gun_inddeaths, date)
ggplot(total, aes(x = date, y = n)) + geom_point() + geom_smooth(lwd = 1, se = FALSE)
# total deaths by time and intent
total_inddeaths <- count(gun_inddeaths, date, intent)
total_inddeaths <- na.omit(total_inddeaths)
ggplot(total_inddeaths, aes(x = date, y = n)) + geom_point(aes(color = intent)) + geom_smooth(lwd = 1, se = FALSE, aes(color = intent), method = 'lm')
View(total)
View(gun_inddeaths)
# total deaths by timY
gun_inddeaths$date <- as.POSIXct(paste(gun_inddeaths$month, gun_inddeaths$year,  sep = "."), format = "%m.%Y")
total <- count(gun_inddeaths, date)
ggplot(total, aes(x = date, y = n)) + geom_point() + geom_smooth(lwd = 1, se = FALSE)
View(total)
gun_inddeaths$date <- as.POSIXct(paste(gun_inddeaths$month, gun_inddeaths$year,  sep = "."), format = "%m.%y")
View(gun_inddeaths)
paste(gun_inddeaths$month, gun_inddeaths$year,  sep = ".")
as.POSIXct(paste(gun_inddeaths$month, gun_inddeaths$year,  sep = "."), format = "%m.%y")
# total deaths by timY
gun_inddeaths$date <- as.POSIXct(paste(gun_inddeaths$month, gun_inddeaths$year,  sep = "."), format = "%m.%Y")
total <- count(gun_inddeaths, date)
ggplot(total, aes(x = date, y = n)) + geom_point() + geom_smooth(lwd = 1, se = FALSE)
View(gun_inddeaths)
# total deaths by timY
gun_inddeaths$date <- as.POSIXct(paste(gun_inddeaths$month, gun_inddeaths$year,  sep = " "), format = "%m %Y")
total <- count(gun_inddeaths, date)
ggplot(total, aes(x = date, y = n)) + geom_point() + geom_smooth(lwd = 1, se = FALSE)
View(gun_inddeaths)
# total deaths by timY
gun_inddeaths$date <- as.Date(paste(gun_inddeaths$month, gun_inddeaths$year,  sep = "."), format = "%m.%Y")
total <- count(gun_inddeaths, date)
ggplot(total, aes(x = date, y = n)) + geom_point() + geom_smooth(lwd = 1, se = FALSE)
as.Date(paste(5, 2013,  sep = "."), format = "%m.%Y")
?as.Date
class(paste(gun_inddeaths$month, gun_inddeaths$year,  sep = "."))
# total deaths by timY
gun_inddeaths$date <- as.Date(paste(gun_inddeaths$month, gun_inddeaths$year,  sep = "."))
as.Date(05.2012)
as.Date("05.2012")
# total deaths by timY
gun_inddeaths$date <- as.Date(paste(gun_inddeaths$month, gun_inddeaths$year,  sep = "/"))
# total deaths by timY
gun_inddeaths$date <- as.Date(paste(gun_inddeaths$month, gun_inddeaths$year,  sep = "/"), format = "%m.%Y")
total <- count(gun_inddeaths, date)
ggplot(total, aes(x = date, y = n)) + geom_point() + geom_smooth(lwd = 1, se = FALSE)
as.Date("05.2012", format = "%m.%Y")
# total deaths by timY
gun_inddeaths$date <- as.yearmon(paste(gun_inddeaths$month, gun_inddeaths$year,  sep = "/"))
# total deaths by time
library(zoo)
gun_inddeaths$date <- as.yearmon(paste(gun_inddeaths$month, gun_inddeaths$year,  sep = "/"))
total <- count(gun_inddeaths, date)
ggplot(total, aes(x = date, y = n)) + geom_point() + geom_smooth(lwd = 1, se = FALSE)
# total deaths by time and intent
total_inddeaths <- count(gun_inddeaths, date, intent)
total_inddeaths <- na.omit(total_inddeaths)
ggplot(total_inddeaths, aes(x = date, y = n)) + geom_point(aes(color = intent)) + geom_smooth(lwd = 1, se = FALSE, aes(color = intent), method = 'lm')
View(gun_inddeaths)
# total deaths by time
library(zoo)
gun_inddeaths$date <- as.yearmon(paste(gun_inddeaths$month, gun_inddeaths$year,  sep = "/"), "%m.%y")
total <- count(gun_inddeaths, date)
ggplot(total, aes(x = date, y = n)) + geom_point() + geom_smooth(lwd = 1, se = FALSE)
# total deaths by time and intent
total_inddeaths <- count(gun_inddeaths, date, intent)
total_inddeaths <- na.omit(total_inddeaths)
ggplot(total_inddeaths, aes(x = date, y = n)) + geom_point(aes(color = intent)) + geom_smooth(lwd = 1, se = FALSE, aes(color = intent), method = 'lm')
View(gun_inddeaths)
# total deaths by time
library(zoo)
gun_inddeaths$date <- as.yearmon(paste(gun_inddeaths$month, gun_inddeaths$year,  sep = "."), "%m.%y")
total <- count(gun_inddeaths, date)
ggplot(total, aes(x = date, y = n)) + geom_point() + geom_smooth(lwd = 1, se = FALSE)
# total deaths by time and intent
total_inddeaths <- count(gun_inddeaths, date, intent)
total_inddeaths <- na.omit(total_inddeaths)
ggplot(total_inddeaths, aes(x = date, y = n)) + geom_point(aes(color = intent)) + geom_smooth(lwd = 1, se = FALSE, aes(color = intent), method = 'lm')
View(gun_inddeaths)
# total deaths by time
library(zoo)
gun_inddeaths$date <- as.yearmon(paste(gun_inddeaths$year, gun_inddeaths$month,  sep = "."), "%y.%m")
total <- count(gun_inddeaths, date)
ggplot(total, aes(x = date, y = n)) + geom_point() + geom_smooth(lwd = 1, se = FALSE)
# total deaths by time and intent
total_inddeaths <- count(gun_inddeaths, date, intent)
total_inddeaths <- na.omit(total_inddeaths)
ggplot(total_inddeaths, aes(x = date, y = n)) + geom_point(aes(color = intent)) + geom_smooth(lwd = 1, se = FALSE, aes(color = intent), method = 'lm')
View(gun_inddeaths)
# total deaths by time
library(zoo)
gun_inddeaths$date <- as.yearmon(paste(gun_inddeaths$year, gun_inddeaths$month), "%y%m")
total <- count(gun_inddeaths, date)
ggplot(total, aes(x = date, y = n)) + geom_point() + geom_smooth(lwd = 1, se = FALSE)
# total deaths by time and intent
total_inddeaths <- count(gun_inddeaths, date, intent)
total_inddeaths <- na.omit(total_inddeaths)
ggplot(total_inddeaths, aes(x = date, y = n)) + geom_point(aes(color = intent)) + geom_smooth(lwd = 1, se = FALSE, aes(color = intent), method = 'lm')
# total deaths by time
library(zoo)
gun_inddeaths$date <- as.Date(paste(gun_inddeaths$month, "01", gun_inddeaths$year, sep = "."), "%m.%d.%y")
total <- count(gun_inddeaths, date)
ggplot(total, aes(x = date, y = n)) + geom_point() + geom_smooth(lwd = 1, se = FALSE)
# total deaths by time and intent
total_inddeaths <- count(gun_inddeaths, date, intent)
total_inddeaths <- na.omit(total_inddeaths)
ggplot(total_inddeaths, aes(x = date, y = n)) + geom_point(aes(color = intent)) + geom_smooth(lwd = 1, se = FALSE, aes(color = intent), method = 'lm')
View(gun_inddeaths)
# total deaths by time
library(zoo)
gun_inddeaths$date <- as.Date(paste(gun_inddeaths$month, "01", gun_inddeaths$year, sep = "-"), "%m-%d-%y")
total <- count(gun_inddeaths, date)
ggplot(total, aes(x = date, y = n)) + geom_point() + geom_smooth(lwd = 1, se = FALSE)
# total deaths by time and intent
total_inddeaths <- count(gun_inddeaths, date, intent)
total_inddeaths <- na.omit(total_inddeaths)
ggplot(total_inddeaths, aes(x = date, y = n)) + geom_point(aes(color = intent)) + geom_smooth(lwd = 1, se = FALSE, aes(color = intent), method = 'lm')
paste(gun_inddeaths$month, "01", gun_inddeaths$year, sep = "-")
# total deaths by time
library(zoo)
gun_inddeaths$date <- as.Date(paste(gun_inddeaths$month, "01", gun_inddeaths$year, sep = "-"), format = "%m-%d-%y")
total <- count(gun_inddeaths, date)
ggplot(total, aes(x = date, y = n)) + geom_point() + geom_smooth(lwd = 1, se = FALSE)
# total deaths by time and intent
total_inddeaths <- count(gun_inddeaths, date, intent)
total_inddeaths <- na.omit(total_inddeaths)
ggplot(total_inddeaths, aes(x = date, y = n)) + geom_point(aes(color = intent)) + geom_smooth(lwd = 1, se = FALSE, aes(color = intent), method = 'lm')
# total deaths by date
gun_inddeaths$date <- as.Date(paste(gun_inddeaths$month, "01", gun_inddeaths$year, sep = "-"), format = "%m-%d-%Y")
total <- count(gun_inddeaths, date)
ggplot(total, aes(x = date, y = n)) + geom_point() + geom_smooth(lwd = 1, se = FALSE)
# total deaths by date and intent
total_inddeaths <- count(gun_inddeaths, date, intent)
total_inddeaths <- na.omit(total_inddeaths)
ggplot(total_inddeaths, aes(x = date, y = n)) + geom_point(aes(color = intent)) + geom_smooth(lwd = 1, se = FALSE, aes(color = intent), method = 'lm')
# total deaths by date
gun_inddeaths$date <- as.Date(paste(gun_inddeaths$month, "01", gun_inddeaths$year, sep = "-"), format = "%m-%d-%Y")
total <- count(gun_inddeaths, date)
ggplot(total, aes(x = date, y = n)) + geom_point() + geom_smooth(lwd = 1, se = FALSE)
# total deaths by date and intent
total_inddeaths <- count(gun_inddeaths, date, intent)
total_inddeaths <- na.omit(total_inddeaths)
ggplot(total_inddeaths, aes(x = date, y = n)) + geom_point(aes(color = intent)) + geom_smooth(lwd = 1, se = FALSE, aes(color = intent), method = 'lm')
# total deaths by date
gun_inddeaths$date <- as.Date(paste(gun_inddeaths$month, "01", gun_inddeaths$year, sep = "-"), format = "%m-%d-%Y")
total <- count(gun_inddeaths, date)
ggplot(total, aes(x = date, y = n)) + geom_point() + geom_smooth(lwd = 1, se = FALSE)
# total deaths by date and intent
total_inddeaths <- count(gun_inddeaths, date, intent)
total_inddeaths <- na.omit(total_inddeaths)
ggplot(total_inddeaths, aes(x = date, y = n)) + geom_point(aes(color = intent)) + geom_smooth(lwd = 1, se = FALSE, aes(color = intent))
View(gun_inddeaths)
gun_inddeaths[gun_inddeaths$age <= 18, ]
inddeaths_teen <- gun_inddeaths[gun_inddeaths$age <= 18, ]
total_teen <- count(inddeaths_teen, date)
total_teen <- na.omit(total_teen)
ggplot(total_teen, aes(x = date, y = n)) + geom_point() + geom_smooth(lwd = 1, se = FALSE, aes(color = intent))
inddeaths_teen <- gun_inddeaths[gun_inddeaths$age <= 18, ]
total_teen <- count(inddeaths_teen, date)
total_teen <- na.omit(total_teen)
ggplot(total_teen, aes(x = date, y = n)) + geom_point() + geom_smooth(lwd = 1, se = FALSE)
unique(gun_inddeaths$date)
unique(total_teen$date)
# total deaths of non-adults by date
inddeaths_teen <- gun_inddeaths[gun_inddeaths$age <= 18, ]
total_teen <- count(inddeaths_teen, date)
total_teen <- na.omit(total_teen)
ggplot(total_teen, aes(x = date, y = n)) + geom_point() + geom_smooth(lwd = 1, se = FALSE)
